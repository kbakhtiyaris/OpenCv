ğŸ“„ Smart Document Scanner with OpenCV + ESP32 Feedback

-
-
-
-
-
-
-
ğŸš€ Overview

This project is a real-time document scanner built with C++ (OpenCV) and ESP32 microcontroller.

It automatically detects documents from a live video stream, auto-crops & enhances them, and provides instant physical feedback using an ESP32 with LED + buzzer alerts.

âœ¨ Think of it as a DIY mini CamScanner, but with IoT integration!

ğŸ¯ Features

âœ… Real-time document detection using OpenCV
âœ… Auto-perspective correction & cropping
âœ… Image enhancement for readability
âœ… Quality scoring (checks edges & stability before saving)
âœ… Automatic saving with timestamps (JPEG format)
âœ… Serial communication with ESP32
âœ… LED + Buzzer feedback for detection, saving, and lost documents
âœ… Cross-platform camera input: IP webcam or USB camera

ğŸ› ï¸ Tech Stack

C++17

OpenCV 4.x (Computer Vision)

Windows API for serial communication

ESP32 (Arduino IDE) for hardware feedback

Hardware: ESP32, LED, Buzzer, USB Camera / IP Webcam

ğŸ“· Demo Flow

Place a document in front of the camera.

The software highlights the detected edges.

ESP32 LED turns ON when document is stable.

Countdown overlay ensures steady capture.

Document is auto-cropped, enhanced, and saved.

ESP32 LED blinks + buzzer beeps to confirm save.

Remove the document â†’ LED OFF + reset.

ğŸ”Œ Hardware Setup
Components

1x ESP32 Dev Board

1x LED (with 220Î© resistor)

1x Active Buzzer

Jumper wires

Breadboard

Circuit Diagram

LED â†’ GPIO 2 (with resistor)

Buzzer â†’ GPIO 15

GND â†’ common ground

ğŸ’» Installation & Setup
1. Clone the repo
git clone https://github.com/kbakhtiyaris/OpenCv/tree/dbe1784168c0d637d9563d874f749e3e26050f38/esp_doc
cd esp_doc

2. Install dependencies

OpenCV 4.x

Windows (Visual Studio / MSVC)

3. Configure your stream

Update in main.cpp:

std::string comPort = "COM6"; // change COM6 according to Your comPort   
std::string streamUrl = "http://192.168.1.106:8080/video";  // update it according to your ip webcam url
std::string saveFolder = "C:/Users/YourName/Documents/Scans/"; // change YourName with appropiate path name

4. Flash ESP32

Upload esp_doc_notifier.ino using Arduino IDE.

5. Run scanner
./esp_doc.exe

ğŸ“‚ Project Structure
esp_doc/
â”œ cpp/
â”‚ â”œ main.cpp
â”‚ â”œ BalancedDocumentDetector.cpp / .hpp
â”‚ â”œ BalancedDocumentWarper.cpp / .hpp
â”‚ â”œ QualityMetrics.cpp / .hpp
â”‚ â”” Config.hpp
â”œ esp32/
â”‚ â”” esp32_scanner_feedback.ino
â”œ samples/
â”‚ â”” doc_2025-09-10_15-39-48.jpg
â”” README.md

ğŸ§  How It Works

Frame Capture â€“ video is read from webcam/IP stream.

Preprocessing â€“ grayscale â†’ blur â†’ edge detection + thresholding.

Contour Detection â€“ largest quadrilateral is assumed as document.

Perspective Transform â€“ warps the document into a top-down view.

Image Enhancement â€“ adaptive histogram & sharpening applied.

Stability Check â€“ ensures consistent detection before saving.

Serial Communication â€“ sends signals to ESP32 (DOC_DETECTED, DOC_SAVED, DOC_LOST).

ESP32 Feedback â€“ LED and buzzer confirm each event.

ğŸ“ˆ Future Improvements

OCR (Optical Character Recognition) integration with Tesseract

Multi-document batch scanning

Wi-Fi transfer from ESP32 to cloud

Mobile app integration

ğŸ™Œ Acknowledgements

OpenCV
 for computer vision

ESP32
 for IoT hardware

ğŸ‘¤ Author

Khud Bakhtiyar Iqbal Sofi
ğŸ“ TÃ¼rkiye | ğŸ“ Mechatronics Engineer
ğŸ”— LinkedIn- www.linkedin.com/in/khud-bakhtiyar-iqbal-sofi-70a2b6374
 â€¢ GitHub - https://github.com/kbakhtiyaris
 â€¢ Gmail - khudbakhtiyariqbal7890@gmail.com
 â€¢ Tiktok - https://www.tiktok.com/@kbakhtiyaris?_t=ZS-8zdlf3T0UYZ&_r=1
âœ¨ If you liked this project, star â­ the repo and connect with me!